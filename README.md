# RedaÃ§Ã£o Detector

```bash

    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
    â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•       â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•   â•šâ•â•   â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•   â•šâ•â•    â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•
    
```

## ğŸ“ Sobre o Projeto

**RedaÃ§Ã£o Detector** Ã© uma ferramenta para detectar e destacar Ã¡reas de texto em imagens de redaÃ§Ãµes manuscritas. O software utiliza processamento de imagem e visÃ£o computacional para identificar regiÃµes de texto, corrigir rotaÃ§Ãµes e agrupar palavras em linhas.

## âœ¨ Funcionalidades

- âœ… **CorreÃ§Ã£o automÃ¡tica de rotaÃ§Ã£o** - Alinha documentos tortos
- âœ… **DetecÃ§Ã£o de texto** - Identifica Ã¡reas de texto em imagens
- âœ… **Agrupamento inteligente** - Agrupa texto por linhas e palavras
- âœ… **Processamento em lote** - Suporte para processar mÃºltiplas imagens
- âœ… **Interface de linha de comando** - CLI com opÃ§Ãµes configurÃ¡veis
- âœ… **API REST** - Endpoint para processamento via HTTP

## ğŸ§° PrÃ©-requisitos

- Python 3.6+
- OpenCV
- NumPy
- FastAPI (para API)
- Rich (para interface CLI)
- Pillow

## ğŸš€ InstalaÃ§Ã£o

```bash

git clone https://github.com/ArthurSampaio13/redacao-ocr.git
cd redacao-detector

uv venv
source venv/bin/activate  
# ou para Windows
venv\Scripts\activate 

# Instale o pacote e suas dependÃªncias
uv pip install -e .
```

## ğŸ’» Uso

### Linha de Comando

## Arquitetura

#### Uma arquitetura via CLI (Command Line Interface)
![CLI](./.github/cli.png)


O RedaÃ§Ã£o Detector pode ser usado diretamente pela linha de comando com vÃ¡rias opÃ§Ãµes:

```bash
# Processar uma Ãºnica imagem
uv redacao-detector --imagem caminho/para/imagem.jpg

# Processar um diretÃ³rio com vÃ¡rias imagens
uv redacao-detector --diretorio caminho/para/diretorio/

# Definir um diretÃ³rio de saÃ­da especÃ­fico
uv redacao-detector --imagem imagem.jpg --saida caminho/para/saida/

# Ativar o modo debug para visualizar imagens intermediÃ¡rias
uv redacao-detector --imagem imagem.jpg --debug

# Apenas visualizaÃ§Ã£o (nÃ£o salvar resultados)
uv redacao-detector --imagem imagem.jpg --nao-salvar
```

### Como Biblioteca Python

```python
from redacao_detector import processar_imagem, processar_diretorio, corrigir_rotacao, detectar_areas_texto

# Processar uma Ãºnica imagem
resultado = processar_imagem("caminho/para/imagem.jpg")

# Processar um diretÃ³rio
processar_diretorio("caminho/para/diretorio/")

# FunÃ§Ãµes de baixo nÃ­vel
import cv2
imagem = cv2.imread("caminho/para/imagem.jpg")
imagem_corrigida = corrigir_rotacao(imagem)
imagem_resultado = detectar_areas_texto(imagem_corrigida)
```

### API REST

#### Arquitetura do Front-End
![FrontEnd](./.github/front.png)

Inicie o servidor FastAPI:

```bash
uvicorn redacao_detector.api.main:app --reload
```

FaÃ§a uma requisiÃ§Ã£o para processar uma imagem:

```bash
curl -X POST -F "file=@caminho/para/imagem.jpg" http://localhost:8000/processar-imagem/ --output resultado.png
```

Ou usando qualquer cliente HTTP como Postman ou atravÃ©s de um frontend.

### TambÃ©m Ã© possÃ­vel utilizar pela Web
#### Link do deploy: https://redacao-ocr-front-ywrd.vercel.app/ 
>Talvez demore um pouco para processar sua imagem, pois estamos utilizando serviÃ§os gratuitos e as mÃ¡quinas precisam ser inicializadas.

## ğŸ”§ ParÃ¢metros CustomizÃ¡veis

O detector permite ajustar parÃ¢metros para melhorar os resultados em diferentes tipos de imagens:

```python
# Exemplo de parÃ¢metros personalizados
params = {
    "tam_kernel_dilatacao": (5, 2),  # Tamanho do kernel para dilataÃ§Ã£o
    "block_size": 11,               # Tamanho do bloco para limiarizaÃ§Ã£o adaptativa
    "c_value": 10,                  # Valor C para limiarizaÃ§Ã£o adaptativa
    "min_area": 500                 # Ãrea mÃ­nima para considerar como texto
}

# Usar parÃ¢metros personalizados
resultado = processar_imagem("imagem.jpg", params=params)
```

## ğŸ§© Estrutura do Projeto

```
redacao_detector/
â”œâ”€â”€ __init__.py            # Exporta os principais componentes
â”œâ”€â”€ detector.py            # FunÃ§Ãµes principais de detecÃ§Ã£o
â”œâ”€â”€ utils.py               # FunÃ§Ãµes auxiliares
â”œâ”€â”€ api/
â”‚   â””â”€â”€ main.py            # ImplementaÃ§Ã£o da API REST
â””â”€â”€ cli.py                 # Interface de linha de comando
```

## ğŸ“‹ Como Funciona

1. **CorreÃ§Ã£o de RotaÃ§Ã£o**:
   - Converte a imagem para escala de cinza
   - Aplica limiarizaÃ§Ã£o para binarizaÃ§Ã£o
   - Detecta contornos e calcula seus Ã¢ngulos
   - Rotaciona a imagem com base no Ã¢ngulo mÃ©dio calculado

2. **DetecÃ§Ã£o de Texto**:
   - PrÃ©-processamento com blur gaussiano
   - LimiarizaÃ§Ã£o adaptativa para separar texto do fundo
   - DilataÃ§Ã£o para conectar componentes de texto
   - IdentificaÃ§Ã£o de contornos de texto
   - Agrupamento de contornos em linhas e palavras
   - Filtragem para a regiÃ£o central da pÃ¡gina
